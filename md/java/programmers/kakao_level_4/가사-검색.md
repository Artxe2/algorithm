```java
class Solution {
    class Trie {
        int value;
        java.util.Map<Character, Trie> map = new java.util.HashMap<>();

        Trie get(char key) {
            return map.get(key);
        }

        int value() {
            return value;
        }

        void putPrefix(String s, int length, int index) {
            this.value++;
            if (index < length) {
                map.computeIfAbsent(s.charAt(index++), 
                        key -> new Trie()).putPrefix(s, length, index);
            }
        }

        void putSuffix(String s, int index) {
            this.value++;
            if (index-- > 0) {
                map.computeIfAbsent(s.charAt(index),
                        key -> new Trie()).putSuffix(s, index);
            }
        }
    }

    public int[] solution(String[] words, String[] queries) {
        int range = 10001;
        int qLength = queries.length;
        int length;
        int index;
        int[] answer = new int[qLength];
        char c;
        String query;
        Trie trie;
        Trie[] prefixTries = new Trie[range];
        Trie[] suffixTries = new Trie[range];

        for (int i = 0; i < range; i++) {
            prefixTries[i] = new Trie();
            suffixTries[i] = new Trie();
        }
        for (String s : words) {
            length = s.length();
            prefixTries[length].putPrefix(s, length, 0);
            suffixTries[length].putSuffix(s, length);
        }
        for (int i = 0; i < qLength; i++) {
            query = queries[i];
            length = query.length();
            if ((c = query.charAt(0)) != '?') {
                trie = prefixTries[length];
                index = 1;
                trie = trie.get(c);
                while (trie != null && index < length
                        && (c = query.charAt(index++)) != '?') {
                    trie = trie.get(c);
                }
            } else if ((c = query.charAt(length - 1)) != '?') {
                trie = suffixTries[length];
                index = length - 1;
                trie = trie.get(c);
                while (trie != null && index > 0
                        && (c = query.charAt(--index)) != '?') {
                    trie = trie.get(c);
                }
            } else {
                trie = prefixTries[length];
            }
            if (trie != null) {
                answer[i] = trie.value();
            }
        }
        return answer;
    }
}
```
 | 정확성 테스트 | 
 |  :-  | 
 | 테스트 1 〉	통과 (4.51ms, 78.4MB) | 
 | 테스트 2 〉	통과 (3.24ms, 77.6MB) | 
 | 테스트 3 〉	통과 (4.50ms, 83.1MB) | 
 | 테스트 4 〉	통과 (3.35ms, 74.1MB) | 
 | 테스트 5 〉	통과 (3.39ms, 81.5MB) | 
 | 테스트 6 〉	통과 (3.64ms, 80.4MB) | 
 | 테스트 7 〉	통과 (8.68ms, 78.7MB) | 
 | 테스트 8 〉	통과 (5.13ms, 85.7MB) | 
 | 테스트 9 〉	통과 (6.28ms, 90.3MB) | 
 | 테스트 10 〉	통과 (6.20ms, 77.1MB) | 
 | 테스트 11 〉	통과 (4.81ms, 75MB) | 
 | 테스트 12 〉	통과 (6.00ms, 92.2MB) | 
 | 테스트 13 〉	통과 (16.76ms, 86.2MB) | 
 | 테스트 14 〉	통과 (11.17ms, 85.8MB) | 
 | 테스트 15 〉	통과 (11.91ms, 89MB) | 
 | 테스트 16 〉	통과 (17.38ms, 86.3MB) | 
 | 테스트 17 〉	통과 (8.04ms, 86MB) | 
 | 테스트 18 〉	통과 (11.87ms, 86.8MB) | 

 | 효율성 테스트 | 
 | :- | 
 | 테스트 1 〉	통과 (312.68ms, 177MB) | 
 | 테스트 2 〉	통과 (499.55ms, 270MB) | 
 | 테스트 3 〉	통과 (467.73ms, 267MB) | 
 | 테스트 4 〉	통과 (448.21ms, 298MB) | 
 | 테스트 5 〉	통과 (710.58ms, 501MB) | 

 | 채점 결과 | 
 | :- | 
 | 정확성: 25.0 | 
 | 효율성: 75.0 | 
 | 합계: 100.0 / 100.0 | 

 || 
 | :- | 
 | 총합 > (2575.61ms, 3007.2MB) | 

[문제 보기](https://programmers.co.kr/learn/courses/30/lessons/60060?language=java)